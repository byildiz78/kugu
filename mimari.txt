Next.js, TailwindCSS, Prisma ORM ve PostgreSQL kullanarak bir restoran/kafe zinciri iÃ§in geliÅŸmiÅŸ bir sadakat ve kampanya yÃ¶netim sistemi geliÅŸtirmek istiyorum.

Bu sistem script bazlÄ± deÄŸil, tamamen form alanlarÄ±yla yÃ¶netilen gÃ¶rsel (no-code) bir kampanya oluÅŸturma mantÄ±ÄŸÄ±na sahip olacak.

AÅŸaÄŸÄ±daki Ã¶zellikleri destekleyecek bir admin panel, API uÃ§larÄ± ve veritabanÄ± modeli geliÅŸtir:

---

ğŸ§± TEKNOLOJÄ° YIÄINI

- Frontend: Next.js (App Router)
- CSS/UI: TailwindCSS + shadcn/ui (veya benzeri component kÃ¼tÃ¼phanesi)
- ORM: Prisma
- VeritabanÄ±: PostgreSQL
- API: Next.js API Routes
- Auth (isteÄŸe baÄŸlÄ±): JWT veya NextAuth

---

ğŸ¯ KAMPANYA YÃ–NETÄ°MÄ° (SCRIPTâ€™SÄ°Z)

Her kampanya koÅŸulu ve Ã¶dÃ¼lÃ¼, formlar Ã¼zerinden seÃ§ilir. Script, JSON yazÄ±mÄ± veya mantÄ±ksal DSL kullanÄ±lmaz.

Kampanya tablosu aÅŸaÄŸÄ±daki gibi yapÄ±landÄ±rÄ±lÄ±r:

- `id`: UUID
- `name`: Kampanya adÄ±
- `triggerType`: ENUM: ['visit', 'amount', 'product', 'time']
- `triggerValue`: SayÄ±sal (Ã¶rnek: 3 ziyaret, 100â‚º)
- `productId`: (Sadece triggerType = 'product' iÃ§in)
- `timeRange`: (Sadece triggerType = 'time' iÃ§in), Ã¶rn: '14:00-17:00'
- `rewardType`: ENUM: ['points', 'product', 'coupon']
- `rewardValue`: Puan miktarÄ±, Ã¼rÃ¼n ID veya kupon havuzu ID
- `targetSegmentId`: KampanyanÄ±n Ã§alÄ±ÅŸacaÄŸÄ± segment
- `isStackable`: DiÄŸer kampanyalarla birlikte Ã§alÄ±ÅŸabilir mi
- `isActive`: true/false
- `startDate`, `endDate`: Kampanya sÃ¼resi

---

ğŸ‘¥ SEGMENT SÄ°STEMÄ°

Segment yapÄ±sÄ± da scriptâ€™siz olacak.

Segment tablosu:
- `id`, `name`, `type`: ['manual', 'dynamic'], `rulesJson` (sadece dynamic iÃ§in)

Dinamik segment Ã¶rneÄŸi:
{
  "lastVisitDaysAgo": { "gte": 30 },
  "totalSpend": { "gte": 500 },
  "tier": "silver"
}

Kampanyalar sadece belirli bir `targetSegmentId`'ye uygulanabilir olacak.

---

ğŸ« KUPON SÄ°STEMÄ°

Her kampanya bir kupon havuzu ile eÅŸleÅŸtirilebilir. Kampanya tetiklendiÄŸinde kullanÄ±cÄ±ya o havuzdan bir adet kullanÄ±lmamÄ±ÅŸ kupon atanÄ±r.

VeritabanÄ± yapÄ±sÄ±:

**CouponPool**
- `id`, `name`, `campaignId`, `totalCount`, `usedCount`

**Coupon**
- `id`, `code`, `poolId`, `assignedToUserId`, `isUsed`, `usedAt`

Kupon kodlarÄ± tekil, otomatik Ã¼retilebilir ve sonradan import edilebilir.

---

ğŸ Ã–DÃœL TÄ°PLERÄ°

Kampanyalar aÅŸaÄŸÄ±daki Ã¶dÃ¼l tÃ¼rlerinden birini tetikler:

- `points`: Belirli miktar puan
- `product`: Belirli bir Ã¼rÃ¼n (Ã¶rneÄŸin â€œÃœcretsiz Cookieâ€)
- `coupon`: Kupon havuzundan bir kod atanÄ±r

Kampanya formu iÃ§inde Ã¶dÃ¼l tÃ¼rÃ¼ dropdown olarak seÃ§ilir ve devamÄ±ndaki alanlar dinamik gÃ¶sterilir.

---

ğŸ‘¤ KULLANICI MODELÄ°

- `id`, `name`, `email`, `tier`, `points`, `segments[]`
- Her kullanÄ±cÄ±nÄ±n puan geÃ§miÅŸi, kazanÄ±lan kampanyalar ve kuponlarÄ± takip edilebilmeli

---

ğŸ“¦ REDDEMPTIONS (KAZANILAN Ã–DÃœLLER)

Her tetiklenen kampanya bir redemption oluÅŸturur:
- `userId`, `campaignId`, `rewardType`, `rewardValue`, `createdAt`

---

ğŸ“Š ADMIN PANEL SAYFALARI

1. `/admin/dashboard` â†’ Ã–zet metrikler
2. `/admin/users` â†’ KullanÄ±cÄ± listesi ve detay
3. `/admin/segments` â†’ Segment oluÅŸturma, listeleme
4. `/admin/rewards` â†’ Ã–dÃ¼l ve kupon havuzu yÃ¶netimi
5. `/admin/coupons` â†’ Kupon listesi, havuz atama
6. `/admin/campaigns` â†’ Kampanya listesi
7. `/admin/campaigns/create` â†’ Form bazlÄ± kampanya oluÅŸturma ekranÄ±

---

ğŸ“„ KAMPANYA FORMU UI DETAYI

- Ad: input
- BaÅŸlangÄ±Ã§ & BitiÅŸ: tarih picker
- KoÅŸul Tipi: dropdown (visit, amount, product, time)
- KoÅŸul DeÄŸeri: numeric input / Ã¼rÃ¼n seÃ§imi / saat aralÄ±ÄŸÄ±
- Ã–dÃ¼l Tipi: dropdown (points, product, coupon)
- Ã–dÃ¼l DetayÄ±: puan sayÄ±sÄ± / Ã¼rÃ¼n ID / kupon havuzu seÃ§imi
- Segment seÃ§imi: dropdown (segment listesi)
- DiÄŸer kampanyalarla birlikte Ã§alÄ±ÅŸabilir mi? checkbox
- Kaydet butonu

---



KodlarÄ± aÃ§Ä±k, yorumlu, modÃ¼ler ve Ã¼retime hazÄ±r ÅŸekilde yaz. Form validasyonlarÄ±nÄ± dahil et. Script/JSON iÃ§ermeyen, gÃ¶rsel alanlara dayalÄ± kontrol mantÄ±ÄŸÄ±na sadÄ±k kal.